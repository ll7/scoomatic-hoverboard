var nodeid;var fullTarget;var relativeFlag;var postBody=null;function onNavigate(d){EPCM.getSAPTop().postBody=null;relativeFlag="false";postBody=d.dataObject.postBody;var k=EPCM._private.isolatedParamsFromNavTarget(d.dataObject.target);nodeid=k.nodeId;var f=k.params;if(d.dataObject.mode==6){hiddenNav(d)}else{if(d.dataObject.mode==0||typeof(d.dataObject.mode)=="undefined"||d.dataObject.mode==5){if(typeof(EPCM.getSAPTop().LSAPI)!=="undefined"&&EPCM.getSAPTop().LSAPI!==null){EPCM.getSAPTop().LSAPI.getHelpCenterPlugin()._private.clearData()}f+=appendOBNUrlParam(nodeid);var l=concatContentAreaParams();if(l){f+=l}f=addTransferedParams(f);EPCM.raiseEvent("urn:com.sapportals:navigation","UpdateTLN",nodeid);navigateShowInPlace(f,d.dataObject.postBody);try{EPCM.getSAPTop().navPanelStatus="exp"}catch(s){}}else{var a=frameworkSupport.contentAreaURL;var o=frameworkSupport.portalURL;var q=d.dataObject.context;var h=d.dataObject.winname;fullTarget=d.dataObject.target;if(frameworkSupport.frameworkPhase=="PERSONPORTAL"){d.dataObject.winfeatures="toolbar=no,menubar=no,resizable=yes";o=document.URLUnencoded;i=o.indexOf("?");if(i>0){o=o.substring(0,i)}}if(fullTarget.indexOf("/irj")!=0&&fullTarget.indexOf("http")!=0){var t="NavigationTarget="+encodeURIComponent(nodeid);if(f){t+="&"+f}if(q){t+="&NavigationContext="+encodeURIComponent(q)}t=t+"&CurrentWindowId="+window.name;if(h!=undefined&&h!=null){t+="&windowId="+escape(h)}if(d.dataObject.mode){t+="&NavMode="+d.dataObject.mode}if(d.dataObject.targetTitle){t+="&TarTitle="+d.dataObject.targetTitle}var v=null;if(typeof(gHistoryFrameworkObj)!="undefined"&&gHistoryFrameworkObj!=null){v=gHistoryFrameworkObj.GetActiveTrackingEntryValue()}if(v){var g=v.URL;if(g){t+="&PrevNavTarget="+encodeURIComponent(g)}}if(typeof(frameworkSupport.usedConenctors)!=="undefined"&&frameworkSupport.usedConenctors!=""){t+="&usedConnectors="+frameworkSupport.usedConenctors}t+=appendOBNUrlParam(nodeid);var l=concatContentAreaParams();if(l){t+=l}if(d.dataObject.mode==1){fullTarget=a+"?"+t}else{fullTarget=o+"?"+t}}var r;if(d.dataObject.winfeatures!=""){r=d.dataObject.winfeatures+","}else{r=""}if(d.dataObject.mode==100){var m=frameworkSupport.modalPopupURL;if(m==null){m=frameworkSupport.contentAreaURL}var w=(new Date()).getTime();var x=m+"?NavigationTarget="+target+"&WindowId="+EPCM.getUniqueWindowId()+"&sap-ai-tabid="+w;var u='<iframe height="100%" width="100%" frameborder="0" src="'+x+'"></iframe>';var n=d.dataObject.winname;var b=d.dataObject.targetTitle;var c={width:360,height:100};var r=d.dataObject.winfeatures;var p=getWinfeaturesProperty(r,"width");var j=getWinfeaturesProperty(r,"height");if(p&&p>100){c.width=p}if(j&&j>50){c.height=j}ppnOpen(n,b,u,c)}else{if(d.dataObject.mode==3){d.dataObject.nodeid=nodeid;d.dataObject.fullTarget=fullTarget;d.dataObject.relativeFlag=relativeFlag;navigateToHeaderlessWindow(r,h,postBody,d.dataObject.target,d)}else{d.dataObject.nodeid=nodeid;navigationToExternalWin(r,d)}}}}}var concatContentAreaParams=function concatContentAreaParams(){var b="";var c=JSUtils.extractContentAreaForwardingParams();var a=c.length;for(var d=0;d<a;d++){b+="&"+c[d].key+"="+c[d].value}if(b==""){return null}else{return b}};function hiddenNav(d){var c=document.getElementById("hiddenNavFrame_Form");var f=d.dataObject.target;if(f!=null&&f.substring(0,4)!="http"){if(f.substring(0,1)!="/"){f=f.replace("?","&");f=frameworkSupport.serverPath+frameworkSupport.contentAreaURL+"?NavigationTarget="+f}else{f=frameworkSupport.serverPath+f}}var b=d.dataObject.postBody;f=extractForActionPad(f);if(c==null){document.getElementById("divChangeContent").innerHTML+="<IFRAME  src=\"javascript:'<html></html>'\" Id='hiddenNavFrame' Name='hiddenNavFrame' style='width:0px;height:0px;display:none'></IFRAME>";document.getElementById("divChangeContent").innerHTML+="<FORM Id='hiddenNavFrame_Form' Method='Post' Target='hiddenNavFrame' Action=''></FORM>";c=document.getElementById("hiddenNavFrame_Form")}c.action=f;if(b){c.innerHTML="";var h="<input type=hidden name='UsePost' id='UsePost' value='true'></input>\n";c.innerHTML+=h;for(var a=0;a<b.length;a++){if(b[a]!=undefined){var e=b[a].name;var g=b[a].value;var h="<input type=hidden name='"+e+"' id='"+e+"' value='"+g+"'></input>\n";c.innerHTML+=h}}}c.submit()}function extractForActionPad(d){var b="";var a=d.indexOf("sapacp");if(a!=-1){b=d.substring(a);var c=b.indexOf("&");if(c!=-1){b=b.substring(0,c)}return b}return d}function onRelativeNavigate(d){var f="";relativeFlag="true";EPCM.getSAPTop().postBody=null;postBody=d.dataObject.postBody;nodeid=d.dataObject.basenodename;if(d.dataObject.basenodename!=undefined&&d.dataObject.basenodename!=null){}else{return false}if(d.dataObject.levelsup!=undefined&&d.dataObject.levelsup!=null){f+="&RelativeLevelsup="+escape(d.dataObject.levelsup)}if(d.dataObject.pathnameslist!=undefined&&d.dataObject.pathnameslist!=null){f+="&RelativePathlist="+escape(d.dataObject.pathnameslist)}if(d.dataObject.history!=undefined&&d.dataObject.history!=null&&d.dataObject.history!=""){f+="&HistoryMode="+escape(d.dataObject.history)}if(d.dataObject.context!=undefined&&d.dataObject.context!=null&&d.dataObject.context!=""){f+="&NavigationContext="+escape(d.dataObject.context)}if(d.dataObject.targetTitle!=undefined&&d.dataObject.targetTitle!=null&&d.dataObject.targetTitle!=""){f+="&TarTitle="+d.dataObject.targetTitle}if(d.dataObject.windowId!=undefined&&d.dataObject.windowId!=null){f+="&windowId="+escape(d.dataObject.windowId)}f=f+"&CurrentWindowId="+window.name;if(d.dataObject.mode!=undefined&&d.dataObject.mode!=null){f+="&NavMode="+d.dataObject.mode}if(d.dataObject.addParams!=undefined&&d.dataObject.addParams!=null){f+="&"+d.dataObject.addParams}if(d.dataObject.sapDocumentRenderingMode!=undefined&&d.dataObject.sapDocumentRenderingMode!=null){f+="&sapDocumentRenderingMode="+d.dataObject.sapDocumentRenderingMode}var c;if(d.dataObject.winfeatures!=""){c=d.dataObject.winfeatures+","}else{c=""}var a=concatContentAreaParams();if(a){f+=a}if(f.charAt(0)=="&"){f=f.substr(1)}var e=frameworkSupport.contentAreaURL;var b=frameworkSupport.portalURL;if(typeof(d.dataObject.mode)=="undefined"||d.dataObject.mode<=1){fullTarget=e+"?"+f}else{fullTarget=b+"?"+f}if(d.dataObject.mode==0||d.dataObject.mode==5){navigateShowInPlace(f,postBody);relativeFlag="false"}else{navigationToExternalWin(c,d)}}function navigateShowInPlace(t,l){if(frameworkSupport.navigationMechanism=="EventBasedNavigation"&&!disableEventNavigationParam(t)&&frameworkSupport.frameworkPhase!="PERSONPORTAL"&&frameworkSupport.ebnModeOnRecovery!="disabled"){var q=buildEventParams(t,l);var j=document.getElementById("contentFrame");if(!j){j=pageSupport._getContentWindow(pageSupport.getIvuFrameObj(frameworkSupport.innerPage))}if(!j){j=document.getElementById("contentAreaFrame")}if(j&&j.EPCM){j.EPCM.DSM.terminateAll(EPCM.DSM.SUSPEND)}EPCM.raiseEvent("urn:com.sapportals:navigation","EventBasedNavigate",q);return}frm=document.getElementById("frmChangeContent");if(frameworkSupport.frameworkPhase=="PERSONPORTAL"){t=t.replace(/\?windowId=[^&\n]*&/,"?");t=t.replace(/(\?windowId=[^&\n]*)|(&?windowId=[^&\n]*)/,"")}var a=frameworkSupport.innerPage;var b=frameworkSupport.innerPageFrameURL;var h=pageSupport.getIvuFrameObj(a);if(frameworkSupport.frameworkPhase=="framework"&&h!=null){if(EPCM.getUAType()==EPCM.MSIE){document.frames[h.name].name=h.name}else{if(EPCM.getUAType()==EPCM.SAFARI){h.name=h.contentWindow.name}}frm.target=h.name;frm.action=b+"?"+t}else{if(frameworkSupport.frameworkPhase=="framework"&&isEmbeddedHeaderlss()){frm.target="_self";var p=frameworkSupport.innerPageFrameURL.indexOf("!2fcom.sap.portal.innerpage");b=b.substr(0,p);frm.action=b+"?"+t}else{if(frameworkSupport.quickLink!=undefined){frm.target+"_self";var r=frameworkSupport.portalURL;frm.action=r+"?standAlone=true&"+t}else{frm.target+"_self";var r=document.location.href;var g=r.indexOf("?");if(g>0){r=r.substr(0,g)}frm.action=r+"?standAlone=true&"+t}}}frm.NavigationTarget.value=nodeid;if(relativeFlag=="true"){frm.RelativeNavBase.value=nodeid}else{frm.RelativeNavBase.value=""}var k=frm.innerHTML;var f=new JSUtils.StringBuilder(frm.innerHTML);if(l){f.Append("<input type='hidden' name='UsePost' id='UsePost' value='true' />\n");for(var n=0;n<l.length;n++){JSUtils.addFormParams(l[n].name,l[n].value,f)}EPCM.getSAPTop().postBody=l}var s=null;if(typeof(gHistoryFrameworkObj)!="undefined"&&gHistoryFrameworkObj!=null){s=gHistoryFrameworkObj.GetActiveTrackingEntryValue()}if(s!=undefined&&s!=null){var d=s.URL;if(d){f.Append("<input type=hidden name='PrevNavTarget' id='PrevNavTarget' value='"+d+"' />\n")}}if(typeof(frameworkSupport.usedConenctors)!=="undefined"&&frameworkSupport.usedConenctors!=""){var m="<input type=hidden name='usedConnectors' id='usedConnectors' value='"+frameworkSupport.usedConenctors+"'></input>\n";f.Append(m)}var c="";try{c=getSessionTerminationKeys();if(c!=""){f.Append(c)}}catch(o){}frm.innerHTML=f.ToString();frm.submit();frm.innerHTML=k}function navigationToExternalWin(b,f){var d=f.dataObject.winname;if(d=="DefaultExternal"||d==""){var c=new Date();d=d+c.getTime()}d=encodeURIComponent(d).replace(/%/g,"");d=d.replace(".","");var h=document.location.protocol+"//"+document.location.host+frameworkSupport.childHtmlPath;try{b=enhanceWinFeatures(b)}catch(g){}f.dataObject.nodeid=nodeid;f.dataObject.fullTarget=fullTarget;f.dataObject.relativeFlag=relativeFlag;frameworkSupport.SetNavigationEventObjContainer(f,"WIDx"+d);var a=window.open(h+"?winName=WIDx"+d,"_blank",b);if(typeof(a)==="undefined"||a===null){window.alert("Could not open new browser window. Contact your system administrator for assistance.")}}EPCM.subscribeEvent("urn:com.sapportals:navigation","Navigate",onNavigate);EPCM.subscribeEvent("urn:com.sapportals:navigation","RelativeNavigate",onRelativeNavigate);EPCM.subscribeEvent("urn:com.sapportals:navigation","DoNavigate",onDoNavigate);function addTransferedParams(c){transferedAttr=frameworkSupport.transferedAttr.split(";");mainURL=window.location.search;URLparts=mainURL.split("?");if(URLparts[1]!=null){Arguments=URLparts[1].split("&");for(var b=0;b<Arguments.length;b++){pair=Arguments[b].split("=");for(var a=0;a<transferedAttr.length;a++){if(pair[0]==transferedAttr[a]){c+="&"+pair[0]+"="+pair[1];break}}}}return c}function onDoNavigate(a){EPCM.doNavigate(a.dataObject,a.dataObject.mode,a.dataObject.winFeat,a.dataObject.winName,a.dataObject.history,a.dataObject.targetTitle,a.dataObject.context)}function ESCAPE_TO_HTML(a){if(a===undefined||a===null){return""}return(a+"").replace(/([\"\&\<\>\'])/g,ESCAPE_TO_HTML.rep)}ESCAPE_TO_HTML.map={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;"};ESCAPE_TO_HTML.rep=function(d,c){return ESCAPE_TO_HTML.map[c]||c};